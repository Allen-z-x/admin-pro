import{h as r,P as a}from"../../vendor-D0oV6N-p.js";import{a as n,r as t,b as c}from"../../common-DRkHVigx.js";const l=r("userInfo",()=>{const e=a({username:"Allen",accessToken:"",roles:["common"]});return{userState:e,storeUserLogin:s=>n(s).then(o=>(e.username=o.data.username,e.roles=o.data.roles,e.accessToken=o.data.accessToken,o.data)),storeRefreshUserInfo:()=>{e.username=="Allen"&&e.accessToken!=""&&t({accessToken:e.accessToken}).then(s=>{e.username=s.data.username,e.roles=s.data.roles,e.accessToken=s.data.accessToken}).catch(()=>{e.accessToken=""})},logout:()=>{sessionStorage.removeItem("userInfo"),e.accessToken="",c.push("/login")}}},{persist:{key:"userInfo",storage:sessionStorage,pick:["userState.accessToken"]}});export{l as u};
