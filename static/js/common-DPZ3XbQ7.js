const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./home-CLUGuqHr.js","./vendor-D0oV6N-p.js","../css/vendor-CCpsxuPl.css","./shared/home/index-CiAKRu_w.js","../css/home-D_dztHzY.css","./user-DchTs3MW.js","./shared/role/user-CI7eup2_.js","./role-VGP6X2uZ.js","./auth-CwNcINx5.js","./index-BjZbzUhC.js","../css/index-CIDrCCBs.css","./index-B7hr6WwV.js","../css/index-BUIjG_1h.css"])))=>i.map(i=>d[i]);
import{_ as a,h as P,r as f,i as R,j as b,N as g,k as y,l as i}from"./vendor-D0oV6N-p.js";const S={path:"/",name:"Layout",redirect:"/",component:()=>a(()=>import("./home-CLUGuqHr.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4]),import.meta.url),meta:{role:["common","admin"],parentRouter:"Home"},children:[{path:"/",name:"HomePage",component:()=>a(()=>import("./home-CLUGuqHr.js").then(e=>e.a),__vite__mapDeps([0,1,2,3,4]),import.meta.url),meta:{isShow:!0,title:"默认首页",parentRouter:"Layout"}},{path:"/p",name:"ParentPage",meta:{isShow:!0,title:"父菜单",parentRouter:"Layout"},children:[{path:"/p/child1",name:"ChildPage1",meta:{isShow:!0,title:"子菜单1",parentRouter:"ParentPage"}},{path:"/p/child2",name:"ChildPage2",meta:{isShow:!0,title:"子菜单2",parentRouter:"ParentPage"}},{path:"/p/child3",name:"ChildPage3",meta:{isShow:!0,title:"子菜单3",parentRouter:"ParentPage"}}]},{path:"/project",name:"projectPage",component:()=>a(()=>import("./home-CLUGuqHr.js").then(e=>e.b),__vite__mapDeps([0,1,2,3,4]),import.meta.url),meta:{isShow:!0,title:"项目模块",parentRouter:"Layout"}},{path:"/user",name:"UserPage",component:()=>a(()=>import("./user-DchTs3MW.js"),__vite__mapDeps([5,1,2,6]),import.meta.url),meta:{title:"用户模块",isShow:!0,parentRouter:"Layout"}},{path:"/role",name:"RolePage",component:()=>a(()=>import("./role-VGP6X2uZ.js"),__vite__mapDeps([7,1,2,6]),import.meta.url),meta:{title:"角色模块",isShow:!0,parentRouter:"Layout"}},{path:"/auth",name:"AuthPage",component:()=>a(()=>import("./auth-CwNcINx5.js"),__vite__mapDeps([8,1,2]),import.meta.url),meta:{title:"权限模块",isShow:!0,parentRouter:"Layout"}}]},E=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),L={path:"/login",name:"login",component:()=>a(()=>import("./index-BjZbzUhC.js"),__vite__mapDeps([9,1,2,3,10]),import.meta.url),meta:{},children:[]},v=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),I=P("SettingStore",()=>{const e=f([]);return{title:e,setTitle:o=>{e.value=o}}});function T(e,t){const o=[];for(;;){o.push(e);const s=t.find(r=>r.name===e),n=t.find(r=>{var l;return r.name===((l=s==null?void 0:s.meta)==null?void 0:l.parentRouter)});if(n){e=n.name;continue}else break}return o.reverse()}const O={path:"/about",name:"about",component:()=>a(()=>import("./index-B7hr6WwV.js"),__vite__mapDeps([11,1,2,12]),import.meta.url),meta:{},children:[]},p=Object.assign({"./modules/home.ts":E,"./modules/login.ts":v}),m=[];Object.keys(p).forEach(e=>{const t=p[e].default;m.push(t)});m.push(O);const u=R({history:b(),routes:m}),w=e=>{const t=I();console.log("currentName",e),console.log("router.getRoutes()",u.getRoutes());const o=T(e,u.getRoutes());t.setTitle(o)},j=["/login","/about"];u.beforeEach(async(e,t,o)=>{g.start(),!!sessionStorage.getItem("userInfo")||j.includes(e.path)?o():o("/login"),w(e.name)});u.afterEach(e=>{g.done()});const _=e=>{let t="";switch(e){case 400:t="请求错误(400)";break;case 403:t="拒绝访问(403)";break;case 401:t="未授权(401)";break;case 500:t="服务器错误(500)";break;case 503:t="服务不可用(503)";break;default:t=`连接出错(${e})!`}return t},c=y.create({baseURL:"/mock/api",timeout:15e3});c.interceptors.request.use(e=>e,e=>Promise.reject(e));c.interceptors.response.use(e=>(e.status===200||i({message:_(e.status),type:"error"}),e),e=>{const{response:t}=e;if(t)return i({message:_(t.status),type:"error"}),Promise.reject(t.data);i({message:"网络连接异常,请稍后再试!",type:"error"})});const h=e=>{const t=e;return new Promise((o,s)=>{c.request(t).then(n=>{const r=n.data;r.code!=0?(i({message:r.message,type:"error"}),s(r.message)):(i({message:r.message,type:"success"}),o(r))})})};function k(e,t,o){return h({...e,url:t,method:"GET",params:o})}function d(e,t,o){return h({...e,url:t,method:"POST",data:o})}const D=async e=>d({},"/login",e),V=async e=>d({},"/getUserInfo",e),U=async(e={})=>k({},"/getUserList",e);export{D as a,u as b,U as c,k as g,V as r,I as u};
